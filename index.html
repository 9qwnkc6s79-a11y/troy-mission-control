<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mission Control</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            line-height: 1.5;
            min-height: 100vh;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        .header {
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(24px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            padding: 24px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .header h1 {
            font-size: 24px;
            font-weight: 600;
            color: #ffffff;
            letter-spacing: -0.025em;
        }
        .header-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #a1a1a1;
        }
        .status-dot {
            width: 8px;
            height: 8px;
            background: #22c55e;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .dashboard {
            padding: 32px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
            gap: 24px;
            margin-top: 32px;
        }
        .dashboard-card {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 28px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            pointer-events: none;
        }
        .dashboard-card:hover {
            background: rgba(255, 255, 255, 0.04);
            border-color: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
        }
        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: #ffffff;
            letter-spacing: -0.025em;
        }
        .card-indicator {
            width: 8px;
            height: 8px;
            background: #22c55e;
            border-radius: 50%;
        }
        .card-description {
            font-size: 15px;
            color: #a1a1a1;
            margin-bottom: 24px;
            line-height: 1.6;
        }
        .card-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }
        .stat {
            padding: 16px;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }
        .stat-number {
            font-size: 24px;
            font-weight: 600;
            color: #ffffff;
            display: block;
            margin-bottom: 4px;
            font-variant-numeric: tabular-nums;
        }
        .stat-label {
            font-size: 13px;
            color: #6b7280;
            font-weight: 500;
        }
        .card-actions {
            display: flex;
            gap: 8px;
        }
        .action-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            color: #a1a1a1;
            display: inline-block;
            font-weight: 500;
        }
        .action-btn:hover {
            background: rgba(255, 255, 255, 0.08);
            color: #ffffff;
        }
        .action-btn.primary {
            background: #ffffff;
            color: #000000;
            border: none;
        }
        .action-btn.primary:hover {
            background: rgba(255, 255, 255, 0.9);
            color: #000000;
        }
        .status-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #34C759;
        }
        .status-indicator.warning {
            background: #FF9500;
        }
        .status-indicator.error {
            background: #FF3B30;
        }
        /* Feature list styles removed */
        .quick-actions {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 32px;
        }
        .quick-actions h2 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #ffffff;
            letter-spacing: -0.025em;
        }
        .quick-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 12px;
        }
        .quick-btn {
            padding: 14px 20px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            text-decoration: none;
            color: #ffffff;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 500;
            font-size: 14px;
        }
        .quick-btn:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.16);
            color: #ffffff;
        }
        .footer {
            text-align: center;
            padding: 60px 32px 40px;
            color: #6b7280;
            font-size: 13px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }
        /* GitHub CTA styles removed */
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>Mission Control</h1>
            <div class="header-status">
                <div class="status-dot"></div>
                <span>System Operational</span>
            </div>
        </div>
    </div>

    <div class="dashboard">
        <div class="quick-actions">
            <h2>Quick Access</h2>
            <div class="quick-grid">
                <a href="/search-viewer.html" class="quick-btn">
                    üîç Global Search
                </a>
                <a href="/activity-viewer-live.html" class="quick-btn">
                    üìà Live Activity Feed
                </a>
                <a href="/calendar-viewer.html" class="quick-btn">
                    üìÖ Task Calendar
                </a>
                <a href="/weather/viewer.html" class="quick-btn">
                    üå§Ô∏è Weather Intelligence
                </a>
                <a href="/organization/viewer.html" class="quick-btn">
                    üóÇÔ∏è Workspace Optimizer
                </a>
                <a href="/cycling/viewer.html" class="quick-btn">
                    üö¥‚Äç‚ôÇÔ∏è Cycling Analytics
                </a>
                <a href="#" class="quick-btn" onclick="refreshAll()">
                    üîÑ Refresh System
                </a>
            </div>
        </div>

        <div class="dashboard-grid">
            <!-- Activity Feed Card -->
            <div class="dashboard-card" onclick="window.open('/activity-viewer-live.html', '_blank')">
                <div class="card-header">
                    <h3 class="card-title">Activity Feed</h3>
                    <div class="card-indicator"></div>
                </div>
                <p class="card-description">
                    Live stream of all system operations. Monitor autonomous actions in real-time,
                    track resource usage, and maintain instant operational visibility.
                </p>
                <div class="card-stats">
                    <div class="stat">
                        <span class="stat-number" id="activityCount">--</span>
                        <span class="stat-label">Activities Today</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="tokenEstimate">--</span>
                        <span class="stat-label">Est. Tokens</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="lastActivity">--</span>
                        <span class="stat-label">Last Activity</span>
                    </div>
                </div>
                <div class="card-actions">
                    <a href="/activity-viewer-live.html" class="action-btn primary" onclick="event.stopPropagation()">Live View</a>
                    <a href="/activity/view.sh" class="action-btn" onclick="event.stopPropagation()">CLI</a>
                </div>
            </div>

            <!-- Task Calendar Card -->
            <div class="dashboard-card" onclick="window.open('/calendar-viewer.html', '_blank')">
                <div class="card-header">
                    <h3 class="card-title">Task Calendar</h3>
                    <div class="card-indicator"></div>
                </div>
                <p class="card-description">
                    Visual timeline of scheduled tasks, automated jobs, and system events. 
                    Monitor upcoming operations and manage execution timing.
                </p>
                <div class="card-stats">
                    <div class="stat">
                        <span class="stat-number" id="scheduledTasks">--</span>
                        <span class="stat-label">Scheduled Tasks</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="nextTask">--</span>
                        <span class="stat-label">Next Task</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="activeJobs">--</span>
                        <span class="stat-label">Active Jobs</span>
                    </div>
                </div>
                <div class="card-actions">
                    <a href="/calendar-viewer.html" class="action-btn primary" onclick="event.stopPropagation()">Open</a>
                    <a href="/calendar/view.sh" class="action-btn" onclick="event.stopPropagation()">CLI</a>
                </div>
            </div>

            <!-- Global Search Card -->
            <div class="dashboard-card" onclick="window.open('/search-viewer.html', '_blank')">
                <div class="card-header">
                    <h3 class="card-title">Global Search</h3>
                    <div class="card-indicator"></div>
                </div>
                <p class="card-description">
                    Unified search across system logs, documentation, and operational data. 
                    Full-text indexing with intelligent relevance scoring and filtering.
                </p>
                <div class="card-stats">
                    <div class="stat">
                        <span class="stat-number" id="indexedDocs">--</span>
                        <span class="stat-label">Documents</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="indexedTerms">--</span>
                        <span class="stat-label">Terms</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="indexSize">--</span>
                        <span class="stat-label">Index Size</span>
                    </div>
                </div>
                <div class="card-actions">
                    <a href="/search-viewer.html" class="action-btn primary" onclick="event.stopPropagation()">Search</a>
                    <a href="#" class="action-btn" onclick="event.stopPropagation(); rebuildIndex()">Rebuild</a>
                </div>
            </div>

            <!-- Weather Intelligence Card -->
            <div class="dashboard-card" onclick="window.open('/weather/viewer.html', '_blank')">
                <div class="card-header">
                    <h3 class="card-title">Weather Intelligence</h3>
                    <div class="card-indicator"></div>
                </div>
                <p class="card-description">
                    Smart weather monitoring for Daniel's locations & schedule. 
                    Aubrey, Boundaries locations, Dallas, and Southlake with intelligent suggestions.
                </p>
                <div class="card-stats">
                    <div class="stat">
                        <span class="stat-number" id="currentTemp">--¬∞F</span>
                        <span class="stat-label">Aubrey Now</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="rainChance">--%</span>
                        <span class="stat-label">Rain Today</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="suggestions">--</span>
                        <span class="stat-label">Suggestions</span>
                    </div>
                </div>
                <div class="card-actions">
                    <a href="/weather/viewer.html" class="action-btn primary" onclick="event.stopPropagation()">View Weather</a>
                    <a href="#" class="action-btn" onclick="event.stopPropagation(); refreshWeather()">Refresh</a>
                </div>
            </div>

            <!-- Workspace Optimizer Card -->
            <div class="dashboard-card" onclick="window.open('/organization/viewer.html', '_blank')">
                <div class="card-header">
                    <h3 class="card-title">Workspace Optimizer</h3>
                    <div class="card-indicator"></div>
                </div>
                <p class="card-description">
                    Intelligent file organization and workspace optimization.
                    Consolidates scattered files, identifies cleanup opportunities, and creates missing docs.
                </p>
                <div class="card-stats">
                    <div class="stat">
                        <span class="stat-number" id="totalFiles">--</span>
                        <span class="stat-label">Total Files</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="workspaceSize">-- MB</span>
                        <span class="stat-label">Size</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="orgSuggestions">--</span>
                        <span class="stat-label">Optimizations</span>
                    </div>
                </div>
                <div class="card-actions">
                    <a href="/organization/viewer.html" class="action-btn primary" onclick="event.stopPropagation()">Optimize</a>
                    <a href="#" class="action-btn" onclick="event.stopPropagation(); analyzeWorkspace()">Analyze</a>
                </div>
            </div>

            <!-- Cycling Analytics Card -->
            <div class="dashboard-card" onclick="window.open('/cycling/viewer.html', '_blank')">
                <div class="card-header">
                    <h3 class="card-title">Cycling Analytics</h3>
                    <div class="card-indicator"></div>
                </div>
                <p class="card-description">
                    Performance tracking and route analysis for cycling workouts.
                    GPX data analysis with weather correlation and training insights.
                </p>
                <div class="card-stats">
                    <div class="stat">
                        <span class="stat-number" id="lastRideDistance">12.8</span>
                        <span class="stat-label">Avg Speed (mph)</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="lastRideDuration">78</span>
                        <span class="stat-label">Duration (min)</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="rideRating">Very Good</span>
                        <span class="stat-label">Latest Rating</span>
                    </div>
                </div>
                <div class="card-actions">
                    <a href="/cycling/viewer.html" class="action-btn primary" onclick="event.stopPropagation()">View Analytics</a>
                    <a href="#" class="action-btn" onclick="event.stopPropagation(); uploadGPX()">Upload GPX</a>
                </div>
            </div>
        </div>

        <!-- Removed GitHub CTA -->
    </div>

    <div class="footer">
        <p>Mission Control System</p>
    </div>

    <script>
        class MissionControl {
            constructor() {
                this.loadDashboardStats();
                this.setupPeriodicUpdates();
            }

            async loadDashboardStats() {
                try {
                    await Promise.all([
                        this.loadActivityStats(),
                        this.loadCalendarStats(),
                        this.loadSearchStats(),
                        this.loadWeatherStats(),
                        this.loadOrganizationStats()
                    ]);
                } catch (error) {
                    console.error('Failed to load dashboard stats:', error);
                }
            }

            async loadActivityStats() {
                // Sample data for demo
                document.getElementById('activityCount').textContent = '12';
                document.getElementById('tokenEstimate').textContent = '~3.2K';
                document.getElementById('lastActivity').textContent = '2m ago';
            }

            async loadCalendarStats() {
                // Sample data for demo
                document.getElementById('scheduledTasks').textContent = '2';
                document.getElementById('nextTask').textContent = 'Jan 26';
                document.getElementById('activeJobs').textContent = '2';
            }

            async loadSearchStats() {
                // Sample data for demo
                document.getElementById('indexedDocs').textContent = '154';
                document.getElementById('indexedTerms').textContent = '3.7K';
                document.getElementById('indexSize').textContent = '2.1MB';
            }

            async loadWeatherStats() {
                try {
                    // Try to get real weather data for Aubrey, TX
                    const response = await fetch('https://wttr.in/Aubrey+TX?format=j1');
                    const data = await response.json();
                    
                    const temp = data.current_condition[0].temp_F;
                    const rainChance = data.weather[0].hourly[4].chanceofrain;
                    
                    document.getElementById('currentTemp').textContent = `${temp}¬∞F`;
                    document.getElementById('rainChance').textContent = `${rainChance}%`;
                    document.getElementById('suggestions').textContent = this.calculateWeatherSuggestions(temp, rainChance);
                } catch (error) {
                    // Fallback to demo data
                    document.getElementById('currentTemp').textContent = '52¬∞F';
                    document.getElementById('rainChance').textContent = '0%';
                    document.getElementById('suggestions').textContent = '2';
                }
            }

            async loadOrganizationStats() {
                try {
                    // Demo organization stats - in real implementation would analyze actual workspace
                    document.getElementById('totalFiles').textContent = '847';
                    document.getElementById('workspaceSize').textContent = '156';
                    document.getElementById('orgSuggestions').textContent = '4';
                } catch (error) {
                    document.getElementById('totalFiles').textContent = '--';
                    document.getElementById('workspaceSize').textContent = '--';
                    document.getElementById('orgSuggestions').textContent = '--';
                }
            }

            calculateWeatherSuggestions(temp, rainChance) {
                let suggestions = 0;
                
                // Workout suggestion
                if (temp < 45) suggestions++;
                
                // Rain suggestion  
                if (rainChance > 30) suggestions++;
                
                // Business suggestion
                if (temp > 35 && rainChance < 50) suggestions++;
                
                return suggestions;
            }

            setupPeriodicUpdates() {
                // Update dashboard stats every 30 seconds
                setInterval(() => {
                    this.loadDashboardStats();
                }, 30000);
            }
        }

        function refreshAll() {
            window.location.reload();
        }

        function rebuildIndex() {
            // In real implementation, would trigger search index rebuild
            alert('Search index rebuild initiated. This may take a few moments.');
        }

        async function refreshWeather() {
            try {
                const dashboard = window.missionControlInstance || new MissionControl();
                await dashboard.loadWeatherStats();
                
                // Visual feedback
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚ü≥';
                btn.style.transform = 'rotate(180deg)';
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.transform = 'rotate(0deg)';
                }, 1000);
            } catch (error) {
                alert('Weather refresh failed. Please try again.');
            }
        }

        function analyzeWorkspace() {
            // In real implementation, would trigger workspace analysis
            alert('Workspace analysis initiated. This will scan all files and provide optimization suggestions.');
            
            // Simulate analysis delay and update stats
            setTimeout(() => {
                const dashboard = window.missionControlInstance || new MissionControl();
                dashboard.loadOrganizationStats();
            }, 2000);
        }

        function uploadGPX() {
            alert('GPX upload functionality would allow you to drag & drop or select GPX files for route analysis and performance tracking.');
        }

        function setupGitHubRepo() {
            alert('GitHub repository setup guide coming soon! This will help you deploy the mission control system to Vercel.');
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', () => {
            window.missionControlInstance = new MissionControl();
        });
    </script>
</body>
</html>